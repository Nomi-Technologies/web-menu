(this["webpackJsonpweb-menu"]=this["webpackJsonpweb-menu"]||[]).push([[0],{11:function(e,t,a){},16:function(e,t,a){e.exports=a(27)},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t){e.exports={apiBaseUrl:{development:"http://localhost:3000",production:"https://nomi-menu-service.herokuapp.com"}}},27:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(13),i=a.n(r),c=(a(11),a(5)),l=a(6),o=a(7),d=a(8),u=a(10),h=(a(23),a(14)),p=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement(h.a,{className:"dish-tile"},s.a.createElement("div",{className:"dish-name"},this.props.dish.name),s.a.createElement("div",{className:"separator"}),s.a.createElement("div",{className:"description"},this.props.dish.description))}}]),a}(s.a.Component),m=(a(24),function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"dish-list-wrapper"},this.props.dishes.map((function(e){return s.a.createElement(p,{key:e.name,dish:e})})))}}]),a}(s.a.Component)),v=(a(25),a(29)),f=a(30),y=a(31),E=a(32),g=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={expanded:!1,selected:new Set},e}return Object(l.a)(a,[{key:"onExpansionChanged",value:function(){var e=this.props.expanded;this.props.onExpansionChanged(!e)}},{key:"onApplyFilter",value:function(){this.props.onApplyFilter(this.state.selected,!1)}},{key:"onClearFilter",value:function(){var e=new Set;this.setState({selected:e}),this.props.onApplyFilter(e,this.state.expanded)}},{key:"genGrid",value:function(){for(var e=this,t=this.props.tags,a=Object.keys(t),n=[],r=function(r){for(var i=[],c=function(n){if(r+n>=a.length)return i.push(s.a.createElement(v.a,{key:n})),"continue";i.push(s.a.createElement(v.a,{key:n},s.a.createElement("div",{className:e.state.selected.has(t[a[r+n]].id)?"tag-selected":"tag-unselected",onClick:function(){var s=t[a[r+n]],i=e.state.selected;i.has(s.id)?i.delete(s.id):i.add(s.id),e.setState({selected:i})}},t[a[r+n]].name)))},l=0;l<3;++l)c(l);n.push(s.a.createElement(f.a,{noGutters:!0,key:r},i))},i=0;i<a.length;i+=3)r(i);return s.a.createElement("div",{className:"grid-container"},s.a.createElement(y.a,null,n))}},{key:"render",value:function(){return s.a.createElement("div",{className:"slide-up-panel"},s.a.createElement("div",{className:"panel-header"},s.a.createElement("div",{id:"header-row"},s.a.createElement("div",{id:"filter-txt",className:"panel-header-element"},"Filters"),s.a.createElement("div",{id:"count",className:"panel-header-element"},s.a.createElement("div",{id:"counter",className:this.state.selected.size>0?"bg-danger":""},this.state.selected.size)),s.a.createElement("div",{id:"spacer",className:"panel-header-element"}),s.a.createElement("div",{id:"clear-btn-wrapper",className:"panel-header-element"},s.a.createElement(E.a,{id:"clear-btn",variant:"secondary",disabled:0===this.state.selected.size,onClick:this.onClearFilter.bind(this)},"Clear")),s.a.createElement("div",{id:"expand-btn",className:"panel-header-element",onClick:this.onExpansionChanged.bind(this)},"Expand"))),this.props.expanded?s.a.createElement("div",{className:"panel-body"},this.genGrid(),s.a.createElement(E.a,{id:"save-btn",variant:"warning",onClick:this.onApplyFilter.bind(this)},"Apply"),s.a.createElement("div",null)):s.a.createElement("div",null))}}]),a}(s.a.Component),b=a(26).apiBaseUrl,k=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={error:null,menu:null,tabIndex:0,excludedDishes:new Set,panelExpanded:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b.production,"/webApi/dishes/1")).then((function(e){return e.json()})).then((function(t){var a=e.parseMenu(t);e.setState({menu:a})})).catch((function(t){return e.setState({error:t})}))}},{key:"parseMenu",value:function(e){var t={categories:[],dishes:[],dishesByCategory:{},dishesByTags:{},tags:{}};return e.forEach((function(e){t.dishes[e.id]=e,t.categories.includes(e.category.name)||(t.categories.push(e.category.name),t.dishesByCategory[e.category.name]=[]),t.dishesByCategory[e.category.name].push(e),e.tags.forEach((function(a){a.id in t.tags||(t.tags[a.id]=a,t.dishesByTags[a.id]=[]),t.dishesByTags[a.id].push(e)}))})),t}},{key:"onSelect",value:function(e,t){t!==e&&this.setState({tabIndex:e})}},{key:"onPanelExpansionChanged",value:function(e){this.setState({panelExpanded:e})}},{key:"onApplyFilter",value:function(e,t){var a=this,n=new Set;e.forEach((function(e){return a.state.menu.dishesByTags[e].forEach((function(e){return n.add(e.id)}))})),this.setState({excludedDishes:n,panelExpanded:t})}},{key:"getDishByCategoryWithFilter",value:function(e){var t=this,a=this.state.menu.dishesByCategory[e],n=[];return a.forEach((function(e){t.state.excludedDishes.has(e.id)||n.push(e)})),n}},{key:"render",value:function(){var e=this,t=this.state.menu;return t?s.a.createElement("div",{className:"menu-screen-wrapper"},s.a.createElement(u.d,{selectedIndex:this.state.tabIndex,forceRenderTabPanel:!0,onSelect:this.onSelect.bind(this),selectedTabClassName:"menu-tab-selected",selectedTabPanelClassName:"menu-panel-selected"},s.a.createElement(u.b,{className:"menu-tabs"},t.categories.map((function(e){return s.a.createElement(u.a,{className:"menu-tab",key:e},e)}))),t.categories.map((function(t){var a=e.getDishByCategoryWithFilter(t);return s.a.createElement(u.c,{key:t,className:"menu-panel"},s.a.createElement(m,{dishes:a}))}))),s.a.createElement("div",{className:"slide-up-panel-wrapper"},s.a.createElement(g,{tags:t.tags,expanded:this.state.panelExpanded,onExpansionChanged:this.onPanelExpansionChanged.bind(this),onApplyFilter:this.onApplyFilter.bind(this)}))):this.state.error?s.a.createElement("div",null,this.state.error):s.a.createElement("div",null,"Loading...")}}]),a}(s.a.Component);var x=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(k,{restaurantId:1}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.4a700173.chunk.js.map