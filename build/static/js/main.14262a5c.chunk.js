(this["webpackJsonpweb-menu"]=this["webpackJsonpweb-menu"]||[]).push([[0],{19:function(e,t,a){},31:function(e,t,a){e.exports=a(42)},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t){e.exports={apiBaseUrl:{development:"http://localhost:3000",production:"https://nomi-menu-service.herokuapp.com"}}},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),i=a.n(s),l=(a(19),a(14)),c=a(15),o=a(17),d=a(18),u=a(13),m=a(29),h=(a(38),a(44)),p=a(48);function v(e){var t=r.a.useState(!1),a=Object(m.a)(t,2),n=a[0],s=a[1];return r.a.createElement(h.a,{className:"dish-tile"},r.a.createElement("div",{className:"dish-title"},r.a.createElement("div",{className:"dish-name"},e.dish.name),r.a.createElement("button",{className:"info-btn",onClick:function(){return s(!0)}},"i")),r.a.createElement("div",{className:"separator"}),r.a.createElement("div",{className:"description"},e.dish.description),r.a.createElement(p.a,{className:"react-bootstrap-modal",show:n,"aria-labelledby":"contained-modal-vcenter",onHide:function(){return s(!1)},centered:!0},r.a.createElement("div",{className:"tag-list-modal"},r.a.createElement(p.a.Header,null,"Contains"),r.a.createElement(p.a.Body,null,e.dish.tags.map((function(e){return r.a.createElement("div",null,e.name)}))))))}a(39);function f(e){return r.a.createElement("div",{className:"dish-list-wrapper"},e.dishes.map((function(e){return r.a.createElement(v,{key:e.name,dish:e})})))}a(40);var E=a(45),y=a(46),g=a(47),b=a(49);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var N=r.a.createElement("path",{d:"M2 2L9.25926 10L16 2",stroke:"black",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}),x=function(e){var t=e.svgRef,a=e.title,n=k(e,["svgRef","title"]);return r.a.createElement("svg",w({width:18,height:12,viewBox:"0 0 18 12",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,N)},C=r.a.forwardRef((function(e,t){return r.a.createElement(x,w({svgRef:t},e))})),S=(a.p,function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selected:new Set},e}return Object(c.a)(a,[{key:"onExpansionChanged",value:function(){var e=this.props.expanded;this.props.onExpansionChanged(!e)}},{key:"onApplyFilter",value:function(){this.props.onApplyFilter(this.state.selected,!1)}},{key:"onClearFilter",value:function(){this.setState({selected:new Set}),this.props.onClearFilter()}},{key:"genGrid",value:function(){for(var e=this,t=this.props.tags,a=Object.keys(t),n=[],s=function(s){for(var i=[],l=function(n){if(s+n>=a.length)return i.push(r.a.createElement(E.a,{key:n})),"continue";i.push(r.a.createElement(E.a,{key:n},r.a.createElement("div",{className:e.state.selected.has(t[a[s+n]].id)?"tag-selected":"tag-unselected",onClick:function(){var r=t[a[s+n]],i=e.state.selected;i.has(r.id)?i.delete(r.id):i.add(r.id),e.setState({selected:i})}},t[a[s+n]].name)))},c=0;c<3;++c)l(c);n.push(r.a.createElement(y.a,{noGutters:!0,key:s},i))},i=0;i<a.length;i+=3)s(i);return r.a.createElement("div",{className:"grid-container"},r.a.createElement(g.a,null,n))}},{key:"render",value:function(){return r.a.createElement("div",{className:"slide-up-panel"},r.a.createElement("div",{className:"panel-header"},r.a.createElement("div",{id:"header-row"},r.a.createElement("div",{id:"filter-txt",className:"panel-header-element"},"Filters"),r.a.createElement("div",{className:"panel-header-element"},r.a.createElement("div",{id:"counter",className:this.state.selected.size>0?"bg-danger":""},this.state.selected.size)),r.a.createElement("div",{id:"spacer",className:"panel-header-element"}),r.a.createElement("div",{id:"clear-btn-wrapper",className:"panel-header-element"},r.a.createElement(b.a,{id:"clear-btn",variant:"secondary",disabled:0===this.state.selected.size,onClick:this.onClearFilter.bind(this)},"Clear")),r.a.createElement("div",{id:"expand-btn",className:"panel-header-element",onClick:this.onExpansionChanged.bind(this)},r.a.createElement(C,{className:this.props.expanded?"expand-arrow-more":"expand-arrow-less"})))),this.props.expanded?r.a.createElement("div",{className:"panel-body"},this.genGrid(),r.a.createElement(b.a,{id:"save-btn",variant:"warning",onClick:this.onApplyFilter.bind(this)},"Apply"),r.a.createElement("div",null)):r.a.createElement("div",null))}}]),a}(r.a.Component)),O=a(41).apiBaseUrl,j=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={error:null,menu:null,tabIndex:0,selected:new Set,excludedDishes:new Set,panelExpanded:!1,modalShow:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(O.production,"/webApi/dishes/1")).then((function(e){return e.json()})).then((function(t){var a=e.parseMenu(t);e.setState({menu:a})})).catch((function(t){return e.setState({error:t})}))}},{key:"parseMenu",value:function(e){var t={categories:[],dishes:[],dishesByCategory:{},dishesByTags:{},tags:{}};return e.forEach((function(e){t.dishes[e.id]=e,t.categories.includes(e.category.name)||(t.categories.push(e.category.name),t.dishesByCategory[e.category.name]=[]),t.dishesByCategory[e.category.name].push(e),e.tags.forEach((function(a){a.id in t.tags||(t.tags[a.id]=a,t.dishesByTags[a.id]=[]),t.dishesByTags[a.id].push(e)}))})),t}},{key:"onSelect",value:function(e,t){t!==e&&this.setState({tabIndex:e})}},{key:"onPanelExpansionChanged",value:function(e){this.setState({panelExpanded:e})}},{key:"onApplyFilter",value:function(e){var t=this,a=new Set;e.forEach((function(e){return t.state.menu.dishesByTags[e].forEach((function(e){return a.add(e.id)}))})),this.setState({selected:e,excludedDishes:a,panelExpanded:!1,modalShow:!0}),setTimeout((function(){return t.setState({modalShow:!1})}),1e3)}},{key:"onClearFilter",value:function(){this.setState({selected:new Set,excludedDishes:new Set})}},{key:"getDishByCategoryWithFilter",value:function(e){var t=this,a=this.state.menu.dishesByCategory[e],n=[];return a.forEach((function(e){t.state.excludedDishes.has(e.id)||n.push(e)})),n}},{key:"render",value:function(){var e=this,t=this.state.menu;return t?r.a.createElement("div",{className:"menu-screen-wrapper"},r.a.createElement(u.d,{selectedIndex:this.state.tabIndex,forceRenderTabPanel:!0,onSelect:this.onSelect.bind(this),selectedTabClassName:"menu-tab-selected",selectedTabPanelClassName:"menu-panel-selected"},r.a.createElement(u.b,{className:"menu-tabs"},t.categories.map((function(e){return r.a.createElement(u.a,{className:"menu-tab",key:e},e)}))),t.categories.map((function(t){var a=e.getDishByCategoryWithFilter(t);return r.a.createElement(u.c,{key:t,className:"menu-panel"},r.a.createElement(f,{dishes:a}))}))),r.a.createElement("div",{className:"slide-up-panel-wrapper"},r.a.createElement(S,{tags:t.tags,expanded:this.state.panelExpanded,onExpansionChanged:this.onPanelExpansionChanged.bind(this),onApplyFilter:this.onApplyFilter.bind(this),onClearFilter:this.onClearFilter.bind(this)})),r.a.createElement(p.a,{className:"react-bootstrap-modal",show:this.state.modalShow,"aria-labelledby":"contained-modal-vcenter",centered:!0,backdrop:!1},r.a.createElement("div",{className:"apply-filter-modal"},r.a.createElement("div",{className:"num-wrapper"},this.state.selected.size),"Filters Applied"))):this.state.error?r.a.createElement("div",null,this.state.error):r.a.createElement("div",null,"Loading...")}}]),a}(r.a.Component);var B=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(j,{restaurantId:1}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.14262a5c.chunk.js.map